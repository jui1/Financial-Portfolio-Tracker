# ---------------------------
# Server Configuration
# ---------------------------
server.port=${SERVER_PORT:8080}

# ---------------------------
# JWT & API Config (unchanged)
# ---------------------------
jwt.secret=${JWT_SECRET:myVerySecretKeyThatIsLongEnoughForJWT512BitsSecurityRequirementsAndMore}
jwt.expiration=${JWT_EXPIRATION:86400000}

alpha.vantage.api.key=${ALPHA_VANTAGE_API_KEY:demo}
alpha.vantage.base.url=${ALPHA_VANTAGE_BASE_URL:https://www.alphavantage.co/query}

cors.allowed.origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:5173}

# ---------------------------
# Database Configuration
# ---------------------------
# PostgreSQL (production) takes priority if environment variables are set
spring.datasource.url=${SPRING_DATASOURCE_URL:${DATABASE_URL:jdbc:h2:mem:testdb}}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:${DB_USERNAME:sa}}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:${DB_PASSWORD:}}
spring.datasource.driver-class-name=${SPRING_DATASOURCE_DRIVER_CLASS_NAME:${DATABASE_DRIVER_CLASS_NAME:org.h2.Driver}}

# JPA Configuration
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:create-drop} # use 'update' in production
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.open-in-view=${SPRING_JPA_OPEN_IN_VIEW:false}
spring.jpa.properties.hibernate.dialect=${SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT:${DATABASE_HIBERNATE_DIALECT:org.hibernate.dialect.H2Dialect}}
spring.jpa.properties.hibernate.format_sql=${SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL:false}

# ---------------------------
# Hibernate Performance
# ---------------------------
spring.jpa.properties.hibernate.jdbc.batch_size=${SPRING_JPA_PROPERTIES_HIBERNATE_JDBC_BATCH_SIZE:20}
spring.jpa.properties.hibernate.order_inserts=${SPRING_JPA_PROPERTIES_HIBERNATE_ORDER_INSERTS:true}
spring.jpa.properties.hibernate.order_updates=${SPRING_JPA_PROPERTIES_HIBERNATE_ORDER_UPDATES:true}
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=${SPRING_JPA_PROPERTIES_HIBERNATE_JDBC_BATCH_VERSIONED_DATA:true}

# ---------------------------
# Hikari Connection Pool
# ---------------------------
spring.datasource.hikari.maximum-pool-size=${SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE:5}
spring.datasource.hikari.idle-timeout=${SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT:300000}
spring.datasource.hikari.max-lifetime=${SPRING_DATASOURCE_HIKARI_MAX_LIFETIME:1200000}
spring.datasource.hikari.connection-timeout=${SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT:20000}

# ---------------------------
# Security Headers
# ---------------------------
server.servlet.session.timeout=${SERVER_SERVLET_SESSION_TIMEOUT:30m}
server.servlet.session.cookie.secure=${SERVER_SERVLET_SESSION_COOKIE_SECURE:true}
server.servlet.session.cookie.http-only=${SERVER_SERVLET_SESSION_COOKIE_HTTP_ONLY:true}
server.servlet.session.cookie.same-site=${SERVER_SERVLET_SESSION_COOKIE_SAME_SITE:strict}
